version: '3.8'

services:
  helf:
    build: .
    container_name: helf-app
    ports:
      - "30171:8080"
    volumes:
      # Persist workout data
      - ./data:/app/data
    environment:
      - DATA_DIR=/app/data
      - MQTT_BROKER_HOST=host.docker.internal
      - MQTT_BROKER_PORT=1883
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: unless-stopped
